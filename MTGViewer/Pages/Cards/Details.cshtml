@page "{id}"
@model Cards.DetailsModel
@{
    ViewData["Title"] = $"{Model.Card.Name} - Details";
}

@using Microsoft.AspNetCore.Identity
@using MTGViewer.Areas.Identity.Data

@inject SignInManager<CardUser> SignInManager
@inject SymbolFormatter MtgSymbols


<div class="row"> 
    <h1 class="h1 col-auto"> @Model.Card.Name </h1> 
    <div class="h5 m-0 pl-sm-0 pb-2 pb-sm-0 col-sm-auto col-12 d-flex align-items-center">
        @MtgSymbols.Format(Model.Card.ManaCost).ToHtmlString()
    </div>
</div>

<div class="btn-group" role="group">
    @if (Model.CardAlts.Any())
    {
        <div class="btn-group" role="group">

            <button id="alt-btn" type="button" class="btn btn-secondary dropdown-toggle"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" >
                Alternate Versions
            </button>

            <div class="dropdown-menu" aria-labelledby="alt-btn">
                @foreach (var card in Model.CardAlts)
                {
                    <a class="dropdown-item" asp-page="Details" asp-route-id="@card.Id" >
                        @card.Name (@card.SetName)
                    </a>
                }
            </div>
        </div>
    }

    @if (SignInManager.IsSignedIn(User))
    {
        <a asp-page="Delete" asp-route-id="@Model.Card.Id"
            class="btn btn-danger" role="alert">
            Delete </a>
    }
</div>

<partial name="_CardPartial" for="Card"/>